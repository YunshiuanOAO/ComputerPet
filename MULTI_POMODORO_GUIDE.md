# 🍅 多番茄鐘功能指南

## 🆕 新功能概述

現在每隻角色（包括主屋）都可以開啟自己獨立的番茄鐘視窗！這意味著你可以：

- **同時管理多個任務**：每個角色代表不同的工作項目
- **獨立計時**：每個番茄鐘可以設定不同的時間和狀態
- **個別跟隨**：每個番茄鐘會跟隨對應的角色移動
- **防止重複**：每個角色最多只能開一個番茄鐘

## 🎯 使用場景

### 場景1：多項目管理
- **主屋番茄鐘**：主要工作項目
- **狗狗1番茄鐘**：副項目A
- **狗狗2番茄鐘**：副項目B
- **狗狗3番茄鐘**：學習時間

### 場景2：團隊協作
- **主屋**：個人主要任務
- **狗狗1**：與同事A的協作項目
- **狗狗2**：與同事B的協作項目
- **狗狗3**：會議準備時間

### 場景3：生活平衡
- **主屋**：工作時間
- **狗狗1**：運動時間
- **狗狗2**：學習時間
- **狗狗3**：休息時間

## 📋 操作指南

### 開啟番茄鐘
1. **主屋番茄鐘**：
   - 右鍵點擊主屋 → 番茄鐘設定
   - 番茄鐘會出現在主屋附近並跟隨主屋移動

2. **狗狗番茄鐘**：
   - 右鍵點擊任意狗狗 → 番茄鐘設定
   - 番茄鐘會出現在該狗狗附近並跟隨該狗狗移動

### 管理多個番茄鐘
- **獨立操作**：每個番茄鐘可以獨立開始、暫停、重置
- **不同模式**：可以設定不同的工作/休息時間
- **個別隱藏**：可以單獨隱藏不需要的番茄鐘視窗

### 防止重複創建
- 如果角色已經有番茄鐘，再次點擊會將現有番茄鐘帶到前面
- 不會創建重複的番茄鐘視窗

## 🔧 技術特性

### 智能跟隨系統
- **個別跟隨**：每個番茄鐘只跟隨對應的角色
- **邊界檢查**：確保番茄鐘始終在螢幕可見範圍內
- **流暢移動**：50ms更新頻率，跟隨移動流暢

### 記憶體管理
- **列表管理**：使用 `List<PomodoroApp>` 管理多個實例
- **索引追蹤**：使用 `List<Integer>` 追蹤每個番茄鐘的跟隨目標
- **自動清理**：關閉的番茄鐘會自動從管理列表中移除

### 位置計算
- **靠近顯示**：番茄鐘距離角色只有30px
- **智能調整**：當角色在螢幕邊緣時自動調整位置
- **多螢幕支援**：適應不同螢幕解析度

## 📊 測試方法

### 基本功能測試
```bash
# 使用測試腳本
bash test_multi_pomodoro.sh

# 或直接啟動
java DesktopPet
```

### 測試步驟
1. **設定角色**：設定3隻狗狗
2. **開啟番茄鐘**：
   - 主屋 → 番茄鐘設定
   - 狗狗1 → 番茄鐘設定
   - 狗狗2 → 番茄鐘設定
   - 狗狗3 → 番茄鐘設定
3. **驗證功能**：
   - 確認有4個獨立的番茄鐘視窗
   - 測試每個番茄鐘的跟隨功能
   - 驗證重複點擊不會創建新視窗

### 進階測試
1. **移動測試**：
   - 讓不同角色開始移動（亂走、閃現）
   - 觀察對應番茄鐘是否正確跟隨
2. **獨立性測試**：
   - 同時啟動多個番茄鐘
   - 設定不同的時間模式
   - 驗證互不干擾
3. **邊界測試**：
   - 將角色移到螢幕邊緣
   - 確認番茄鐘位置調整正確

## ✅ 預期結果

### 成功標準
- [ ] 可以同時開啟多個番茄鐘（最多1+狗狗數量）
- [ ] 每個番茄鐘正確跟隨對應角色
- [ ] 重複點擊不會創建重複視窗
- [ ] 每個番茄鐘可以獨立操作
- [ ] 角色移動時番茄鐘跟隨流暢
- [ ] 番茄鐘始終保持在螢幕可見範圍內

### 效能指標
- **記憶體使用**：每個番茄鐘約增加5-10MB記憶體使用
- **CPU使用**：每個番茄鐘增加約1-2%的CPU使用（主要是位置更新）
- **響應速度**：番茄鐘跟隨延遲小於100ms

## 🐛 常見問題

### Q: 可以開啟幾個番茄鐘？
A: 最多可以開啟 1個主屋番茄鐘 + N個狗狗番茄鐘（N為狗狗數量）

### Q: 番茄鐘會互相干擾嗎？
A: 不會，每個番茄鐘都是獨立的實例，有自己的計時器和狀態

### Q: 如何關閉特定的番茄鐘？
A: 點擊番茄鐘視窗右上角的眼睛圖示，或直接關閉視窗

### Q: 番茄鐘跟隨不正確怎麼辦？
A: 檢查角色是否還在螢幕上，或嘗試重新開啟番茄鐘

## 🔄 版本更新

### v2.0 - 多番茄鐘支援
- ✅ 支援每個角色獨立的番茄鐘
- ✅ 智能跟隨系統
- ✅ 防止重複創建
- ✅ 記憶體優化管理

### 未來計劃
- 🔄 番茄鐘主題自訂
- 🔄 統計報告功能
- 🔄 番茄鐘間的協作功能
- 🔄 雲端同步支援

---

**享受你的多任務番茄鐘體驗！** 🍅✨ 